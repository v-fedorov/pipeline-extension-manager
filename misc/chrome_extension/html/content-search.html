<!-- The Modal -->
<div id="__contentModal" class="__modal">

	<!-- Modal content -->
	<div class="__modal-content __animateBottom">
		<span class="__close">&times;</span>

		<h1 class="inline bold text-medium-blue">Extension tester</h1>
		<h4 class="admin-description text-dark-grey">Click on a document to test it with the extension</h4>
		<br>
		<br>

		<div class="tab-navigation">
			<div id="__tab1" class="tab enabled active">Select document</div>
			<div id="__tab2" class="tab enabled">Test document</div>
			<div id="__tab3" class="tab enabled">Setttings</div>
		</div>

		<div class="tab-content">
			<div data-tab="__tab1" class="tab-pane active">
				<div class="mod-header-padding mod-form-top-bottom-padding">

					<div class='sync-feedback mod-error mt2' id="__apiKeyWarning" style="display:none;">
						<span class='sync-feedback-icon'>
							<svg class='icon' viewBox='0 0 10 10'>
								<path d='M9.79.212A.72.72 0 0 0 8.77.211L5 3.981 1.229.211A.717.717 0 0 0 .211.212H.21A.72.72 0 0 0 .211 1.23l3.771 3.769L.211 8.77a.718.718 0 0 0 0 1.018.718.718 0 0 0 1.018 0L5 6.017l3.771 3.771A.72.72 0 0 0 9.789 8.77L6.018 4.999 9.789 1.23A.72.72 0 0 0 9.79.212'></path>
							</svg>
    					</span>
						<span class='sync-feedback-text'>No API key found, please add one in the settings tab.</span>
					</div>

					<div id="__orgContent" class="CoveoSearchInterface" data-enable-history="false" data-design="new" data-endpoint="orgContent">

						<div class="coveo-search-section">
							<div class="CoveoSearchbox" data-enable-omnibox="true"></div>
						</div>
						<div class="coveo-main-section">
							<div class="coveo-results-column">
								<div class="CoveoShareQuery"></div>
								<div class="CoveoPreferencesPanel">
									<div class="CoveoResultsPreferences"></div>
									<div class="CoveoResultsFiltersPreferences"></div>
								</div>
								<div class="CoveoTriggers"></div>
								<div class="CoveoBreadcrumb"></div>
								<div class="CoveoSearchAlerts"></div>
								<div class="coveo-results-header">
									<div class="coveo-summary-section">
										<span class="CoveoQuerySummary"></span>
										<span class="CoveoQueryDuration"></span>
									</div>
									<div class="coveo-sort-section">
										<span class="CoveoSort" data-sort-criteria="relevancy" data-caption="Relevance"></span>
										<span class="CoveoSort" data-sort-criteria="date descending,date ascending" data-caption="Date"></span>
									</div>
								</div>
								<div class="CoveoHiddenQuery"></div>
								<div class="CoveoDidYouMean"></div>
								<div class="CoveoErrorReport" data-pop-up="false"></div>
								<div class="CoveoResultList" data-layout="list" data-wait-animation="fade" data-auto-select-fields-to-include="true">
									<script id="Default" class="result-template" type="text/html" data-layout="list">
										<div class="coveo-result-frame">
											<div class="coveo-result-row">
												<div class="coveo-result-cell" style="width:85px;text-align:center;padding-top:7px;">
													<span class="CoveoIcon"></span>
													<div class="CoveoQuickview">
													</div>
												</div>
												<div class="coveo-result-cell" style="padding-left:15px;">
													<div class="coveo-result-row">
														<div class="coveo-result-cell" style="font-size:18px;">
															<a class="CoveoResultLink"></a>
														</div>
														<div class="coveo-result-cell" style="width:120px; text-align:right; font-size:12px">
															<span class="CoveoFieldValue" data-field="@date" data-helper="date"></span>
														</div>
													</div>
													<div class="coveo-result-row">
														<div class="coveo-result-cell">
															<span class="CoveoExcerpt"></span>
														</div>
													</div>
												</div>
											</div>
											<div class="coveo-result-row">
												<div class="coveo-result-cell" style="width:85px;text-align:center">
												</div>
												<div class="coveo-result-cell" style="font-size:13px;padding-left: 15px;">
													<table class="CoveoFieldTable">
														<tbody>
															<tr data-field="@author" data-caption="Author">
															</tr>
															<tr data-field="@source" data-caption="Source">
															</tr>
															<tr data-field="@language" data-caption="Language">
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</script>
								</div>
								<div class="CoveoResultsPerPage"></div>
							</div>

						</div>
					</div>

				</div>
			</div>
			<div data-tab="__tab2" class="tab-pane">
				<div class="mod-header-padding mod-form-top-bottom-padding">
					<div class="coveo-form">
						<label>Document unique ID</label>
						<fieldset class="input-field form-group">
							<input type="text" id="__testDocId" placeholder="uniqueId">
							<input type="hidden" id="__currentExtension">
						</fieldset>
						<fieldset class="form-group">
							<button id="__runTests" class="btn mod-primary">Test</button>
						</fieldset>

						<fieldset class="form-group">
							<p style="color:red;" title="Example: Youtube has a mapping for the meta coveo_likecount and maps it to the field (meta) ytlikecount, if you were to use coveo_likecount in your script, you wouldn't get a value" data-placement="down">Warning: not all metadata is present compared to a real extension, only indexed metadata is used</p>
						</fieldset>

						<div class="loading-prompt" id="__testLoading" style="display:none;">
							<div>Running test. Please wait.</div>
							<div class="spinner">
								<div class="bounce1"></div>
								<div class="bounce2"></div>
								<div class="bounce3"></div>
							</div>
						</div>

						<br>

						<fieldset class="form-group">
							<pre id="__testResults" style="white-space: pre-wrap; word-wrap:break-word;"></pre>
						</fieldset>

					</div>
				</div>
			</div>
			<div data-tab="__tab3" class="tab-pane">
				<div class="mod-header-padding mod-form-top-bottom-padding">
					<div class="coveo-form">
						<label>API Key</label>
						<fieldset class="input-field form-group">
							<input type="text" id="__testApiKey" placeholder="API Key">
						</fieldset>
						<fieldset class="form-group">
							<button id="__saveSettings" class="btn mod-primary">Save</button>
						</fieldset>
					</div>
					<br>
					<h4>How to get the API key:</h4>
					<ol>
						<li>1. Create a new API key</li>
						<li>2. Give the privileges of
							<ul class="bullet-list">
								<li>Content > Extensions > Edit</li>
								<li>Search > Execute queries > Enable</li>
							</ul>
						</li>
						<li>3. Paste the key above and save</li>
						<li>4. After clicking the save button, the page will reload and the search should work</li>
					</ol>
					<br>
					<p>Addition help may be provided by @pmccormick</p>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			var tab1 = $('#__tab1');
			var tab2 = $('#__tab2');
			var tab3 = $('#__tab3');
			var tabpane1 = $('[data-tab=__tab1]');
			var tabpane2 = $('[data-tab=__tab2]');
			var tabpane3 = $('[data-tab=__tab3]');

			function resetTabs() {
				tab1.removeClass('active');
				tab2.removeClass('active');
				tab3.removeClass('active');
				tabpane1.removeClass('active');
				tabpane2.removeClass('active');
				tabpane3.removeClass('active');
			}

			tab1.on('click', function () {
				resetTabs();
				tab1.addClass("active");
				tabpane1.addClass("active");
			});

			tab2.on("click", function () {
				resetTabs();
				tab2.addClass("active");
				tabpane2.addClass("active");
				$('#__testResults').text('');
			});

			tab3.on('click', function () {
				resetTabs();
				tab3.addClass("active");
				tabpane3.addClass("active");
			});
		</script>

	</div>
</div>